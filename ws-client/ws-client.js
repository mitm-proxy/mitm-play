(()=>{var __defProp=Object.defineProperty;var __defProps=Object.defineProperties;var __getOwnPropDescs=Object.getOwnPropertyDescriptors;var __getOwnPropSymbols=Object.getOwnPropertySymbols;var __hasOwnProp=Object.prototype.hasOwnProperty;var __propIsEnum=Object.prototype.propertyIsEnumerable;var __defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:true,configurable:true,writable:true,value}):obj[key]=value;var __spreadValues=(a,b)=>{for(var prop in b||(b={}))if(__hasOwnProp.call(b,prop))__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b)){if(__propIsEnum.call(b,prop))__defNormalProp(a,prop,b[prop])}return a};var __spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b));var __commonJS=(cb,mod)=>function __require(){return mod||(0,cb[Object.keys(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports};var require_ws_postmessage=__commonJS({"ws-client/_src/_ws_postmessage.js"(exports,module){module.exports=()=>{function receiveMessage(event){if(window.mitm.client.postmessage){console.log(`>>> Postmessage: ${event.origin} => https://${location.host}`,event.data)}}window.addEventListener("message",receiveMessage,false)}}});var require_ws_client=__commonJS({"ws-client/_src/_ws_client.js"(exports,module){module.exports=()=>{let windowRef;return{_help({data}){console.log(data)},_ping({data}){console.log(data)},_open({data}){const features="directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,width=800,height=600";windowRef=window.open(data.url,"_logs",features);windowRef.blur()},_style({data}){const{q,css}=data;document.querySelectorAll(q).forEach(node=>node.style.cssText=css)},_saveTags({routes}){if(!location.origin.match("chrome-extension")){console.log("Update routes");window.mitm.routes=routes}},_files({data,typ}){const{files}=window.mitm;console.warn(`receive brodcast ${typ}`);for(const key in files[`${typ}_events`]){console.warn(files[`${typ}_events`][key]+"");files[`${typ}_events`][key](data)}},_setClient({data}){console.log("_setClient",data);window.mitm.client=data}}}}});var require_ws_msg_parser=__commonJS({"ws-client/_src/_ws_msg-parser.js"(exports,module){var _ws_client=require_ws_client();var _ws_wccmd=_ws_client();module.exports=(event,msg)=>{if(window.mitm.argv.debug){if(msg.length>40){console.log(">>> ws-message: `%s...`",msg.slice(0,40))}else{console.log(">>> ws-message: `%s`",msg)}}const arr=msg.replace(/\s+$/,"").match(/^ *([\w:]+) *(\{.*)/);if(arr){let[,cmd,json]=arr;try{if(typeof json==="string"){json=JSON.parse(json)}}catch(error){console.error(json,error)}if(window._ws_queue[cmd]){const handler=window._ws_queue[cmd];delete window._ws_queue[cmd];handler(json.data)}else if(_ws_wccmd[cmd]){_ws_wccmd[cmd].call(event,json)}}}}});var require_ws_in_iframe=__commonJS({"ws-client/_src/_ws_in-iframe.js"(exports,module){module.exports=()=>{let ifrm;try{ifrm=window.self!==window.top}catch(e){ifrm=true}return ifrm?"iframe":"window"}}});var require_ws_vendor=__commonJS({"ws-client/_src/_ws_vendor.js"(exports,module){module.exports=()=>{const{vendor}=navigator;const browser={"":"firefox","Google Inc.":"chromium","Apple Computer, Inc.":"webkit"}[vendor];return browser}}});var require_ws_init_socket=__commonJS({"ws-client/_src/_ws_init-socket.js"(exports,module){var _ws_msgParser=require_ws_msg_parser();var _ws_inIframe=require_ws_in_iframe();var _ws_vendor=require_ws_vendor();module.exports=()=>{window._ws_queue={};window._ws_connected=false;const{__args,__flag}=window.mitm;if(window._ws_connect===void 0){window._ws_connect={}}const onopen=data=>{function ws_send(){for(const key in window._ws_connect){window._ws_connected_send=true;console.warn(window._ws_connect[key]+"");window._ws_connect[key](data)}}if(__flag["ws-connect"]){console.log("ws: open connection")}console.timeEnd("ws");window._ws_connected=true;setTimeout(ws_send,1);setTimeout(()=>{if(!window._ws_connected_send){console.error("RETRY..........");ws_send()}},10)};const onclose=function(){if(__flag["ws-connect"]){console.log("ws: close connection")}};const onmessage=function(e){if(__flag["on-message"]){console.log("on-message:",e.data)}_ws_msgParser(e,e.data)};const connect=__args.nosocket===void 0;if(connect||chrome&&chrome.tabs){const vendor=["firefox","webkit"].includes(_ws_vendor());const pre=vendor?"ws":"wss";const prt=vendor?"3002":"3001";const url=`${pre}://localhost:${prt}/ws?page=${_ws_inIframe()}&url=${document.URL.split("?")[0]}`;let ws;try{ws=new WebSocket(url)}catch(error){console.error(error)}console.time("ws");window._ws=ws;ws.onopen=onopen;ws.onclose=onclose;ws.onmessage=onmessage}if(__flag["ws-connect"]){console.log(`ws: ${connect?"init":"off"} connection`)}}}});var require_ws_namespace=__commonJS({"ws-client/_src/_ws_namespace.js"(exports,module){module.exports=()=>{const{hostname:host}=location;let namespace;function toRegex(str){return str.replace(/\./g,"\\.").replace(/\?/g,"\\?")}for(const key in window.mitm.routes){if(host.match(toRegex(key.replace(/~/g,"[^.]*")))){namespace=key;break}}return namespace}}});var require_ws_screenshot=__commonJS({"ws-client/_src/_ws_screenshot.js"(exports,module){var _ws_namespace=require_ws_namespace();var _ws_vendor=require_ws_vendor();var act;function screenshot(e){if(mitm.argv.lazyclick){if(mitm.screenshot){window.mitm.screenshot=void 0;console.log(">>> delay action");return}if(act){act=void 0;return}}const namespace=_ws_namespace();const browser=_ws_vendor();const host=location.origin.replace("://","~~");const route=window.mitm.routes[namespace];const{selector}=route.screenshot;const arr=document.body.querySelectorAll(selector);const fname=location.pathname.replace(/^\//g,"~");const delay=mitm.argv.lazyclick===true?700:mitm.argv.lazyclick;for(const el of arr){let node=e.target;while(el!==node&&node!==document.body){node=node.parentNode}if(node!==document.body){const _page=window["xplay-page"];const params={namespace,_page,host,browser};params.fname=fname==="~"?"~_":fname;window.ws__send("screenshot",params);if(mitm.argv.lazyclick){window.mitm.screenshot=e.target;e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();setTimeout(()=>{act=window.mitm.screenshot;if(act){act.click();act=void 0}else{console.log("delay action undefined")}},delay)}return}}}module.exports=()=>{const route=window.mitm.routes[_ws_namespace()];if(route&&route.screenshot){window.addEventListener("DOMContentLoaded",()=>{document.querySelector("body").addEventListener("click",screenshot)})}}}});var require_ws_location=__commonJS({"ws-client/_src/_ws_location.js"(exports,module){var _ws_namespace=require_ws_namespace();var _ws_vendor=require_ws_vendor();module.exports=()=>{const containerStyle1="position: fixed;z-index: 99999;right: 3px;";const containerStyle2="position: fixed;z-index: 99999;left:  3px;";const containerStyle3="position: fixed;z-index: 99999;right: 3px; top: 20px; text-align: end;";const buttonStyle="";const style=`
  .mitm-btn {
    border: none;
    font-size: 8px;
    cursor: pointer;
    border-radius: 3px;
    font-family: monaco, Consolas, "Lucida Console", monospace;
  }
  .mitm-btn:hover{
    text-decoration:underline;
  }
  .bgroup-right .mitm-br,
  .bgroup-left .mitm-br{
    display:table;
  }`;const event=new Event("urlchanged");let container={right3:{},right:{},left:{}};let ctrl=false;let button={};let bgroup={right3:{},right:{},left:{}};let intervId;let observerfn;function toRegex(pathMsg){let[path,msg]=pathMsg.split("=>").map(item=>item.trim());path=path.replace(/\./g,"\\.").replace(/\?/g,"\\?");return{path,msg}}function createButton(buttons,pos){let br;for(const id in buttons){const[caption,color,klas]=id.split("|");const btn=document.createElement("button");const fn2=buttons[id];btn.onclick=async e=>{let arr=fn2(e);if(arr instanceof Promise){arr=await arr}if(Array.isArray(arr)){await play(arr)}};btn.innerText=caption;btn.classList.add("mitm-btn");btn.classList.add(`${pos}`);btn.classList.add(klas||caption);btn.style=buttonStyle+(color?`background: ${color};`:"");if(pos==="right"){br=document.createElement("span");br.innerHTML="&nbsp;";bgroup[pos].appendChild(br);bgroup[pos].appendChild(btn)}else{br=document.createElement("span");br.className="mitm-br";bgroup[pos].appendChild(btn);bgroup[pos].appendChild(br)}}}function setButtons(buttons,position){if(bgroup[position]){bgroup[position].innerHTML="";createButton(buttons,position)}}let debunk;function urlChange(event2){const namespace=_ws_namespace();if(window.mitm.autofill){delete window.mitm.autofill}if(window.mitm.autointerval){clearInterval(intervId);delete window.mitm.autointerval}if(window.mitm.autobuttons){delete window.mitm.autobuttons}if(window.mitm.rightbuttons){delete window.mitm.rightbuttons}if(window.mitm.leftbuttons){delete window.mitm.leftbuttons}if(window.mitm.macrokeys){delete window.mitm.macrokeys}if(namespace){const{href,origin}=location2;const _href=href.replace(origin,"");const{_macros_,macros}=window.mitm;observerfn=void 0;for(const key in macros){const{path,msg}=toRegex(key);if(_href.match(path)){button.innerHTML=msg||"Entry";_macros_&&_macros_();observerfn=macros[key]();debunk&&clearTimeout(debunk);debunk=setTimeout(()=>{debunk=void 0;const{autobuttons,rightbuttons,leftbuttons}=window.mitm;rightbuttons&&setButtons(rightbuttons,"right3");leftbuttons&&setButtons(leftbuttons,"left");if(window.mitm.autofill){autobuttons&&setButtons(__spreadProps(__spreadValues({},autobuttons),{"Entry"(){let{autofill}=window.mitm;if(typeof autofill==="function"){autofill=autofill()}play(autofill)}}),"right")}else{autobuttons&&setButtons(autobuttons,"right")}},0)}}}container.right3.style=containerStyle3;container.right.style=containerStyle1;container.left.style=containerStyle2;const visible=window.mitm.autofill;button.style=buttonStyle+(visible?"background-color: azure;":"display: none;");if(typeof window.mitm.autointerval==="function"){intervId=setInterval(window.mitm.autointerval,500)}ctrl=false}const vendor=_ws_vendor();if(["firefox","webkit"].includes(vendor)||chrome&&!chrome.tabs){document.querySelector("html").addEventListener("keydown",keybCtrl);window.addEventListener("urlchanged",urlChange);if(document.readyState!=="loading"){init()}else{window.addEventListener("DOMContentLoaded",init)}}else{return}const fn=history.pushState;history.pushState=function(){fn.apply(history,arguments);compareHref()};_play=json=>{return new Promise(function(resolve,reject){try{window.ws__send("autofill",json,resolve)}catch(error){reject(error)}})};_post=json=>{const config={method:"POST",headers:{"Accept":"application/json","Content-Type":"application/json"},body:JSON.stringify(json)};return new Promise(function(resolve,reject){try{fetch("/mitm-play/play.json",config).then(function(response){resolve(response.json())}).then(function(data){resolve(data)})}catch(error){reject(error)}})};async function play(autofill){const{__args}=window.mitm;if(autofill){if(typeof autofill==="function"){autofill=autofill()}const browser=_ws_vendor();const lenth=autofill.length;const _page=window["xplay-page"];const _frame=window["xplay-frame"];const _json={autofill,browser,_page,_frame};console.log(lenth===1?`  ${autofill}`:JSON.stringify(autofill,null,2));let result;if([true,"off"].includes(__args.nosocket)){result=await _post(_json)}else{result=await _play(_json)}return result}}window.mitm.fn.play=play;function keybCtrl(e){const{macrokeys}=window.mitm;if(e.ctrlKey&&e.key==="Shift"){ctrl=!ctrl;container.right3.style=containerStyle3+(!ctrl?"":"display: none;");container.right.style=containerStyle1+(!ctrl?"":"display: none;");container.left.style=containerStyle2+(!ctrl?"":"display: none;")}else if(e.ctrlKey&&e.altKey){console.log({macro:`ctrl + alt + ${e.code}`});if(macrokeys){let macro=macrokeys[e.code];if(macro){macro=macro();if(Array.isArray(macro)){let macroIndex=0;const interval=setInterval(()=>{let selector=macro[macroIndex];if(selector.match(/^ *[=-]>/)){const activeElement=CssSelectorGenerator.getCssSelector(document.activeElement);selector=`${activeElement} ${selector}`}play([selector]);macroIndex+=1;if(macroIndex>=macro.length){clearInterval(interval)}},100)}}}}}const{location:location2}=document;let oldHref=location2.href;let oDebunk=void 0;function compareHref(nodes){if(oldHref!=location2.href){window.dispatchEvent(event);oldHref=location2.href}else{if(typeof observerfn==="function"){oDebunk&&clearTimeout(oDebunk);oDebunk=setTimeout(()=>{oDebunk=void 0;observerfn(nodes);const{autobuttons,rightbuttons,leftbuttons}=window.mitm;rightbuttons&&setButtons(rightbuttons,"right3");leftbuttons&&setButtons(leftbuttons,"left");const{autofill}=window.mitm;if(autofill){autobuttons&&setButtons(__spreadProps(__spreadValues({},autobuttons),{"Entry"(){play(autofill)}}),"right")}else{autobuttons&&setButtons(autobuttons,"right")}},100)}}}function init(){const html=document.querySelector("html");const htmlref=html.firstElementChild;const styleButtons=document.createElement("style");const divTopRight3=document.createElement("div");const divTopRight=document.createElement("div");const divTopLeft=document.createElement("div");styleButtons.innerHTML=style;divTopRight3.innerHTML=`<span class="bgroup-right"></span>`;divTopRight.innerHTML=`<span class="bgroup-right"></span>`;divTopLeft.innerHTML=`<span class="bgroup-left"></span>`;divTopRight.className="mitm autofill-container";divTopLeft.className="mitm autofill-container";divTopRight3.style=containerStyle3;divTopRight.style=containerStyle1;divTopLeft.style=containerStyle2;html.insertBefore(styleButtons,htmlref);html.insertBefore(divTopRight3,htmlref);html.insertBefore(divTopRight,htmlref);html.insertBefore(divTopLeft,htmlref);setTimeout(()=>{container.right3=divTopRight3;container.right=divTopRight;container.left=divTopLeft;button.style=`${buttonStyle}background-color: azure;`;bgroup.right3=divTopRight3.children[0];bgroup.right=divTopRight.children[0];bgroup.left=divTopLeft.children[0];urlChange(event);observed()},0)}const observer=new MutationObserver(compareHref);window.observer=observer;function observed(){observer.disconnect();observer.observe(document.body,{subtree:true,childList:true})}}}});var require_ws_debounce=__commonJS({"ws-client/_src/_ws_debounce.js"(exports,module){function debounce(fn,delay=500){let _timeout;return function(){const _this=this;const args=arguments;_timeout&&clearTimeout(_timeout);_timeout=setTimeout(()=>{fn.apply(_this,args)},delay)}}module.exports=debounce}});var require_ws_route=__commonJS({"ws-client/_src/_ws_route.js"(exports,module){var _ws_namespace=require_ws_namespace();module.exports=()=>{const namespace=_ws_namespace();let route=window.mitm.routes[namespace];const{_subns:s}=route._childns;if(s&&mitm.routes[s]){route=mitm.routes[s]}return route}}});var require_ws_observer=__commonJS({"ws-client/_src/_ws_observer.js"(exports,module){var _ws_namespace=require_ws_namespace();var _ws_debounce=require_ws_debounce();var _ws_vendor=require_ws_vendor();var _ws_route=require_ws_route();module.exports=()=>{if(location.origin.match("chrome-extension")){return}const{hostname:host}=location;const sshot={};const nodes={};let route=_ws_route();if(route&&route.screenshot){const{observer:ob2}=route.screenshot;for(const id in ob2){let el={};if(ob2[id]===true){el={title:"notitle",insert:true,remove:true}}if(typeof ob2[id]!=="string"){el={title:"nocapture",insert:false,remove:false}}else{const arr=ob2[id].split(":");arr[1].split(",").map(e=>{el[e]=true});el.title=arr[0]}sshot[id]=el;nodes[id]={insert:false,remove:true}}}let ob;let fname;const namespace=_ws_namespace();const browser=_ws_vendor();const callback=function(){if(route&&route.screenshot){ob=route.screenshot.observer}const _page=window["xplay-page"];for(const id in nodes){const el=document.body.querySelectorAll(id);if(el.length){if(!nodes[id].insert){nodes[id].insert=true;if(nodes[id].remove!==void 0){nodes[id].remove=false}if(ob&&typeof ob[id]==="function"){const nod=el[0]||el;if(nod._ws_count===void 0){nod._ws_count=0}nod._ws_count+=1;if(nod._ws_count<2){ob[id](nod)}}if(sshot[id].insert){fname=location.pathname.replace(/^\//,"").replace(/\//g,"-");fname=`${fname}-${sshot[id].title}-insert`;window.ws__send("screenshot",{namespace,_page,host,fname,browser})}}}else{if(!nodes[id].remove){nodes[id].remove=true;nodes[id].insert=false;if(sshot[id].remove){fname=location.pathname.replace(/^\//,"").replace(/\//g,"-");fname=`${fname}-${sshot[id].title}-remove`;window.ws__send("screenshot",{namespace,_page,host,fname,browser})}}}}};document.addEventListener("DOMContentLoaded",()=>{const observer=new MutationObserver(_ws_debounce(callback,100));observer.observe(document.body,{attributes:true,childList:true,subtree:true})})}}});var require_ws_general=__commonJS({"ws-client/_src/_ws_general.js"(exports,module){var t64="Wabcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZh";var nanoid=(size=8)=>{let id="";while(size-- >0){id+=t64[Math.random()*64|0]}return id};module.exports=()=>{const{_ws}=window;window.ws_broadcast=(json,_all=true)=>{const msg={data:json,_all};_ws.send(`broadcast${JSON.stringify(msg)}`)};window.ws_emitpage=(json,regex="")=>{const msg={data:json,regex};_ws.send(`emitpage${JSON.stringify(msg)}`)};window.ws__style=(json,_all=true)=>{const msg={data:json,_all};_ws.send(`_style${JSON.stringify(msg)}`)};window.ws__ping=json=>{const msg={data:json};_ws.send(`_ping${JSON.stringify(msg)}`)};window.ws__help=()=>{_ws.send("_help{}")};window.ws__open=json=>{const msg={data:json};_ws.send(`_open${JSON.stringify(msg)}`)};window.ws__send=(cmd,data,handler)=>{const{__flag}=window.mitm;const id=nanoid();const key=`${cmd}:${id}`;window._ws_queue[key]=handler||(w=>{});setTimeout(function(){if(window._ws_queue[key]){delete window._ws_queue[key];console.log(">>> ws timeout!",key)}},5e3);const params=`${key}${JSON.stringify({data})}`;if(__flag["ws-message"]){console.log("_ws.send",cmd)}_ws.send(params)}}}});var require_ws_csp_err=__commonJS({"ws-client/_src/_ws_csp-err.js"(exports,module){var _ws_namespace=require_ws_namespace();var _timeout;var _csp={};module.exports=()=>{const cspError=function(e){const{hostname:host}=location;const namespace=_ws_namespace();const path=location.pathname.replace(/^\//,"").replace(/\//g,"-");const{blockedURI,disposition,documentURI,effectiveDirective,originalPolicy,timeStamp,type,violatedDirective}=e;const typ=`[${disposition}] ${documentURI}`;if(!_csp[typ]){_csp[typ]={}}if(!_csp[typ]._general_){_csp[typ]._general_={policy:originalPolicy,namespace,host,path}}const _doc=_csp[typ];if(!_doc[violatedDirective]){_doc[violatedDirective]={}}const _err=_doc[violatedDirective];if(!_err[blockedURI]){_err[blockedURI]={}}const _match=originalPolicy.match(`${violatedDirective} [^;]+;`);const directive=_match?_match[0]:effectiveDirective;_err[blockedURI]={directive,timeStamp,type};_timeout&&clearTimeout(_timeout);_timeout=setTimeout(()=>{console.log(">>> CSP:",_csp);_csp={}},4e3)};if(window.mitm.client.csp){document.addEventListener("securitypolicyviolation",cspError)}}}});var _ws_postmessage=require_ws_postmessage();var _ws_initSocket=require_ws_init_socket();var _ws_screenshot=require_ws_screenshot();var _ws_location=require_ws_location();var _ws_observer=require_ws_observer();var _ws_general=require_ws_general();var _ws_cspErr=require_ws_csp_err();_ws_postmessage();_ws_initSocket();_ws_screenshot();_ws_location();_ws_observer();_ws_general();_ws_cspErr();console.log("ws-client loaded...");})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiX3NyYy9fd3NfcG9zdG1lc3NhZ2UuanMiLCAiX3NyYy9fd3NfY2xpZW50LmpzIiwgIl9zcmMvX3dzX21zZy1wYXJzZXIuanMiLCAiX3NyYy9fd3NfaW4taWZyYW1lLmpzIiwgIl9zcmMvX3dzX3ZlbmRvci5qcyIsICJfc3JjL193c19pbml0LXNvY2tldC5qcyIsICJfc3JjL193c19uYW1lc3BhY2UuanMiLCAiX3NyYy9fd3Nfc2NyZWVuc2hvdC5qcyIsICJfc3JjL193c19sb2NhdGlvbi5qcyIsICJfc3JjL193c19kZWJvdW5jZS5qcyIsICJfc3JjL193c19yb3V0ZS5qcyIsICJfc3JjL193c19vYnNlcnZlci5qcyIsICJfc3JjL193c19nZW5lcmFsLmpzIiwgIl9zcmMvX3dzX2NzcC1lcnIuanMiLCAiX3NyYy93cy1jbGllbnQuanMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qIGdsb2JhbCBsb2NhdGlvbiAqL1xyXG5tb2R1bGUuZXhwb3J0cyA9ICgpID0+IHtcclxuICBmdW5jdGlvbiByZWNlaXZlTWVzc2FnZSAoZXZlbnQpIHtcclxuICAgIGlmICh3aW5kb3cubWl0bS5jbGllbnQucG9zdG1lc3NhZ2UpIHtcclxuICAgICAgY29uc29sZS5sb2coYD4+PiBQb3N0bWVzc2FnZTogJHtldmVudC5vcmlnaW59ID0+IGh0dHBzOi8vJHtsb2NhdGlvbi5ob3N0fWAsIGV2ZW50LmRhdGEpXHJcbiAgICB9XHJcbiAgfVxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgcmVjZWl2ZU1lc3NhZ2UsIGZhbHNlKVxyXG5cclxuICAvLyBpZiAoIWNocm9tZS53aW5kb3dzKSB7XHJcbiAgLy8gICBmdW5jdGlvbiByZXBvcnRXaW5kb3dTaXplKCkge1xyXG4gIC8vICAgICBjb25zdCB7aW5uZXJXaWR0aCwgaW5uZXJIZWlnaHR9ID0gd2luZG93O1xyXG4gIC8vICAgICBjb25zb2xlLmxvZyh7aW5uZXJXaWR0aCwgaW5uZXJIZWlnaHR9KTtcclxuICAvLyAgIH1cclxuICAvLyAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHJlcG9ydFdpbmRvd1NpemUpO1xyXG4gIC8vIH1cclxufVxyXG4iLCAibW9kdWxlLmV4cG9ydHMgPSAoKSA9PiB7XHJcbiAgbGV0IHdpbmRvd1JlZlxyXG4gIHJldHVybiB7XHJcbiAgICAvLyBleDogd3NfX2hlbHAoKVxyXG4gICAgX2hlbHAgKHsgZGF0YSB9KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICB9LFxyXG4gICAgLy8gZXg6IHdzX19waW5nKFwidGhlcmVcIilcclxuICAgIF9waW5nICh7IGRhdGEgfSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgfSxcclxuICAgIC8vIGV4OiB3c19fb3Blbih7dXJsOiBcImh0dHBzOi8vZ29vZ2xlLmNvbVwifSlcclxuICAgIF9vcGVuICh7IGRhdGEgfSkge1xyXG4gICAgICBjb25zdCBmZWF0dXJlcyA9ICdkaXJlY3Rvcmllcz0wLHRpdGxlYmFyPTAsdG9vbGJhcj0wLGxvY2F0aW9uPTAsc3RhdHVzPTAsbWVudWJhcj0wLHdpZHRoPTgwMCxoZWlnaHQ9NjAwJ1xyXG4gICAgICB3aW5kb3dSZWYgPSB3aW5kb3cub3BlbihkYXRhLnVybCwgJ19sb2dzJywgZmVhdHVyZXMpXHJcbiAgICAgIHdpbmRvd1JlZi5ibHVyKClcclxuICAgIH0sXHJcbiAgICAvLyBleDogd3NfX3N0eWxlKCcuaW50cm89PmJhY2tncm91bmQ6cmVkOycpXHJcbiAgICBfc3R5bGUgKHsgZGF0YSB9KSB7XHJcbiAgICAgIGNvbnN0IHsgcSwgY3NzIH0gPSBkYXRhXHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwocSkuZm9yRWFjaChcclxuICAgICAgICBub2RlID0+IChub2RlLnN0eWxlLmNzc1RleHQgPSBjc3MpXHJcbiAgICAgIClcclxuICAgIH0sXHJcbiAgICAvLyBleDogd3NfX1xyXG4gICAgX3NhdmVUYWdzICh7IHJvdXRlcyB9KSB7XHJcbiAgICAgIGlmICghbG9jYXRpb24ub3JpZ2luLm1hdGNoKCdjaHJvbWUtZXh0ZW5zaW9uJykpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVXBkYXRlIHJvdXRlcycpXHJcbiAgICAgICAgd2luZG93Lm1pdG0ucm91dGVzID0gcm91dGVzXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvLyBleDogd3NfX1xyXG4gICAgX2ZpbGVzICh7IGRhdGEsIHR5cCB9KSB7XHJcbiAgICAgIGNvbnN0IHsgZmlsZXMgfSA9IHdpbmRvdy5taXRtXHJcbiAgICAgIGNvbnNvbGUud2FybihgcmVjZWl2ZSBicm9kY2FzdCAke3R5cH1gKVxyXG4gICAgICAvKipcclxuICAgICAgICogZXZlbnQgaGFuZGxlciBhZnRlciByZWNlaXZpbmcgd3MgcGFja2V0XHJcbiAgICAgICAqIGllOiB3aW5kb3cubWl0bS5maWxlcy5yb3V0ZV9ldmVudHMgPSB7ZXZlbnRPYmplY3QuLi59XHJcbiAgICAgICAqL1xyXG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBmaWxlc1tgJHt0eXB9X2V2ZW50c2BdKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKGZpbGVzW2Ake3R5cH1fZXZlbnRzYF1ba2V5XSArICcnKVxyXG4gICAgICAgIGZpbGVzW2Ake3R5cH1fZXZlbnRzYF1ba2V5XShkYXRhKVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgX3NldENsaWVudCAoeyBkYXRhIH0pIHtcclxuICAgICAgY29uc29sZS5sb2coJ19zZXRDbGllbnQnLCBkYXRhKVxyXG4gICAgICB3aW5kb3cubWl0bS5jbGllbnQgPSBkYXRhXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cclxuY29uc3QgX3dzX2NsaWVudCA9IHJlcXVpcmUoJy4vX3dzX2NsaWVudCcpXHJcbmNvbnN0IF93c193Y2NtZCA9IF93c19jbGllbnQoKVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAoZXZlbnQsIG1zZykgPT4ge1xyXG4gIGlmICh3aW5kb3cubWl0bS5hcmd2LmRlYnVnKSB7XHJcbiAgICBpZiAobXNnLmxlbmd0aCA+IDQwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCc+Pj4gd3MtbWVzc2FnZTogYCVzLi4uYCcsIG1zZy5zbGljZSgwLCA0MCkpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZygnPj4+IHdzLW1lc3NhZ2U6IGAlc2AnLCBtc2cpXHJcbiAgICB9XHJcbiAgfVxyXG4gIGNvbnN0IGFyciA9IG1zZy5yZXBsYWNlKC9cXHMrJC8sICcnKS5tYXRjaCgvXiAqKFtcXHc6XSspICooXFx7LiopLylcclxuICBpZiAoYXJyKSB7XHJcbiAgICBsZXQgWywgY21kLCBqc29uXSA9IGFyclxyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHR5cGVvZiAoanNvbikgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAganNvbiA9IEpTT04ucGFyc2UoanNvbilcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihqc29uLCBlcnJvcilcclxuICAgIH1cclxuICAgIGlmICh3aW5kb3cuX3dzX3F1ZXVlW2NtZF0pIHtcclxuICAgICAgY29uc3QgaGFuZGxlciA9IHdpbmRvdy5fd3NfcXVldWVbY21kXVxyXG4gICAgICBkZWxldGUgd2luZG93Ll93c19xdWV1ZVtjbWRdXHJcbiAgICAgIGhhbmRsZXIoanNvbi5kYXRhKVxyXG4gICAgfSBlbHNlIGlmIChfd3Nfd2NjbWRbY21kXSkge1xyXG4gICAgICBfd3Nfd2NjbWRbY21kXS5jYWxsKGV2ZW50LCBqc29uKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCAibW9kdWxlLmV4cG9ydHMgPSAoKSA9PiB7XHJcbiAgbGV0IGlmcm1cclxuICB0cnkge1xyXG4gICAgaWZybSA9IHdpbmRvdy5zZWxmICE9PSB3aW5kb3cudG9wXHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgaWZybSA9IHRydWVcclxuICB9XHJcbiAgcmV0dXJuIGlmcm0gPyAnaWZyYW1lJyA6ICd3aW5kb3cnXHJcbn1cclxuIiwgIm1vZHVsZS5leHBvcnRzID0gKCkgPT4ge1xyXG4gIGNvbnN0IHsgdmVuZG9yIH0gPSBuYXZpZ2F0b3JcclxuICBjb25zdCBicm93c2VyID0ge1xyXG4gICAgJyc6ICdmaXJlZm94JyxcclxuICAgICdHb29nbGUgSW5jLic6ICdjaHJvbWl1bScsXHJcbiAgICAnQXBwbGUgQ29tcHV0ZXIsIEluYy4nOiAnd2Via2l0J1xyXG4gIH1bdmVuZG9yXVxyXG4gIHJldHVybiBicm93c2VyXHJcbn1cclxuIiwgIi8qIGdsb2JhbCBXZWJTb2NrZXQgKi9cclxuLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXHJcbmNvbnN0IF93c19tc2dQYXJzZXIgPSByZXF1aXJlKCcuL193c19tc2ctcGFyc2VyJylcclxuY29uc3QgX3dzX2luSWZyYW1lID0gcmVxdWlyZSgnLi9fd3NfaW4taWZyYW1lJylcclxuY29uc3QgX3dzX3ZlbmRvciA9IHJlcXVpcmUoJy4vX3dzX3ZlbmRvcicpXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICgpID0+IHtcclxuICB3aW5kb3cuX3dzX3F1ZXVlID0ge31cclxuICB3aW5kb3cuX3dzX2Nvbm5lY3RlZCA9IGZhbHNlXHJcbiAgY29uc3Qge19fYXJncywgX19mbGFnfSA9IHdpbmRvdy5taXRtXHJcblxyXG4gIGlmICh3aW5kb3cuX3dzX2Nvbm5lY3Q9PT11bmRlZmluZWQpIHtcclxuICAgIHdpbmRvdy5fd3NfY29ubmVjdCA9IHt9XHJcbiAgfVxyXG5cclxuICBjb25zdCBvbm9wZW4gPSBkYXRhID0+IHtcclxuICAgIGZ1bmN0aW9uIHdzX3NlbmQoKSB7XHJcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHdpbmRvdy5fd3NfY29ubmVjdCkge1xyXG4gICAgICAgIHdpbmRvdy5fd3NfY29ubmVjdGVkX3NlbmQgPSB0cnVlXHJcbiAgICAgICAgY29uc29sZS53YXJuKHdpbmRvdy5fd3NfY29ubmVjdFtrZXldICsgJycpXHJcbiAgICAgICAgd2luZG93Ll93c19jb25uZWN0W2tleV0oZGF0YSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChfX2ZsYWdbJ3dzLWNvbm5lY3QnXSkge1xyXG4gICAgICBjb25zb2xlLmxvZygnd3M6IG9wZW4gY29ubmVjdGlvbicpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS50aW1lRW5kKCd3cycpXHJcbiAgICB3aW5kb3cuX3dzX2Nvbm5lY3RlZCA9IHRydWVcclxuXHJcbiAgICBzZXRUaW1lb3V0KHdzX3NlbmQsIDEpIC8vIG1pbmltaXplIGludGVybWl0dGVuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgaWYgKCF3aW5kb3cuX3dzX2Nvbm5lY3RlZF9zZW5kKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignUkVUUlkuLi4uLi4uLi4uJylcclxuICAgICAgICB3c19zZW5kKClcclxuICAgICAgfVxyXG4gICAgfSwgMTApIC8vIG1pbmltaXplIGludGVybWl0dGVuICAgICBcclxuICB9XHJcblxyXG4gIGNvbnN0IG9uY2xvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoX19mbGFnWyd3cy1jb25uZWN0J10pIHtcclxuICAgICAgY29uc29sZS5sb2coJ3dzOiBjbG9zZSBjb25uZWN0aW9uJylcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IG9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBpZiAoX19mbGFnWydvbi1tZXNzYWdlJ10pIHtcclxuICAgICAgY29uc29sZS5sb2coJ29uLW1lc3NhZ2U6JywgZS5kYXRhKVxyXG4gICAgfVxyXG4gICAgX3dzX21zZ1BhcnNlcihlLCBlLmRhdGEpXHJcbiAgfVxyXG4gIFxyXG4gIGNvbnN0IGNvbm5lY3QgPSBfX2FyZ3Mubm9zb2NrZXQ9PT11bmRlZmluZWRcclxuICBpZiAoY29ubmVjdCB8fCAoY2hyb21lICYmIGNocm9tZS50YWJzKSkge1xyXG4gICAgY29uc3QgdmVuZG9yID0gWydmaXJlZm94JywgJ3dlYmtpdCddLmluY2x1ZGVzKF93c192ZW5kb3IoKSlcclxuICAgIGNvbnN0IHByZSA9IHZlbmRvciA/ICd3cycgOiAnd3NzJ1xyXG4gICAgY29uc3QgcHJ0ID0gdmVuZG9yID8gJzMwMDInIDogJzMwMDEnXHJcbiAgICBjb25zdCB1cmwgPSBgJHtwcmV9Oi8vbG9jYWxob3N0OiR7cHJ0fS93cz9wYWdlPSR7X3dzX2luSWZyYW1lKCl9JnVybD0ke2RvY3VtZW50LlVSTC5zcGxpdCgnPycpWzBdfWBcclxuICAgIGxldCB3c1xyXG4gICAgdHJ5IHtcclxuICAgICAgd3MgPSBuZXcgV2ViU29ja2V0KHVybCkgICAgXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgfVxyXG4gICAgY29uc29sZS50aW1lKCd3cycpXHJcbiAgICB3aW5kb3cuX3dzID0gd3NcclxuICBcclxuICAgIHdzLm9ub3BlbiA9IG9ub3BlblxyXG4gICAgd3Mub25jbG9zZSA9IG9uY2xvc2VcclxuICAgIHdzLm9ubWVzc2FnZSA9IG9ubWVzc2FnZSAgXHJcbiAgfVxyXG4gIGlmIChfX2ZsYWdbJ3dzLWNvbm5lY3QnXSkge1xyXG4gICAgY29uc29sZS5sb2coYHdzOiAke2Nvbm5lY3QgPyAnaW5pdCcgOiAnb2ZmJ30gY29ubmVjdGlvbmApXHJcbiAgfVxyXG59XHJcbiIsICIvKiBnbG9iYWwgbG9jYXRpb24gKi9cclxubW9kdWxlLmV4cG9ydHMgPSAoKSA9PiB7XHJcbiAgY29uc3QgeyBob3N0bmFtZTogaG9zdCB9ID0gbG9jYXRpb25cclxuICBsZXQgbmFtZXNwYWNlXHJcblxyXG4gIGZ1bmN0aW9uIHRvUmVnZXggKHN0cikge1xyXG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9cXC4vZywgJ1xcXFwuJykucmVwbGFjZSgvXFw/L2csICdcXFxcPycpXHJcbiAgfVxyXG5cclxuICBmb3IgKGNvbnN0IGtleSBpbiB3aW5kb3cubWl0bS5yb3V0ZXMpIHtcclxuICAgIGlmIChob3N0Lm1hdGNoKHRvUmVnZXgoa2V5LnJlcGxhY2UoL34vZywgJ1teLl0qJykpKSkge1xyXG4gICAgICBuYW1lc3BhY2UgPSBrZXlcclxuICAgICAgYnJlYWtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG5hbWVzcGFjZVxyXG59XHJcbiIsICIvKiBnbG9iYWwgbG9jYXRpb24sIG1pdG0gKi9cclxuLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXHJcbmNvbnN0IF93c19uYW1lc3BhY2UgPSByZXF1aXJlKCcuL193c19uYW1lc3BhY2UnKVxyXG5jb25zdCBfd3NfdmVuZG9yID0gcmVxdWlyZSgnLi9fd3NfdmVuZG9yJylcclxuXHJcbmxldCBhY3RcclxuZnVuY3Rpb24gc2NyZWVuc2hvdCAoZSkge1xyXG4gIGlmIChtaXRtLmFyZ3YubGF6eWNsaWNrKSB7XHJcbiAgICBpZiAobWl0bS5zY3JlZW5zaG90KSB7XHJcbiAgICAgIHdpbmRvdy5taXRtLnNjcmVlbnNob3QgPSB1bmRlZmluZWRcclxuICAgICAgY29uc29sZS5sb2coJz4+PiBkZWxheSBhY3Rpb24nKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGlmIChhY3QpIHtcclxuICAgICAgYWN0ID0gdW5kZWZpbmVkXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gIH1cclxuICBjb25zdCBuYW1lc3BhY2UgPSBfd3NfbmFtZXNwYWNlKClcclxuICBjb25zdCBicm93c2VyID0gX3dzX3ZlbmRvcigpXHJcbiAgY29uc3QgaG9zdCA9IGxvY2F0aW9uLm9yaWdpbi5yZXBsYWNlKCc6Ly8nICwnfn4nKVxyXG4gIGNvbnN0IHJvdXRlID0gd2luZG93Lm1pdG0ucm91dGVzW25hbWVzcGFjZV1cclxuICBjb25zdCB7IHNlbGVjdG9yIH0gPSByb3V0ZS5zY3JlZW5zaG90XHJcblxyXG4gIGNvbnN0IGFyciA9IGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcilcclxuICBjb25zdCBmbmFtZSA9IGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vZywgJ34nKVxyXG4gIGNvbnN0IGRlbGF5ID0gbWl0bS5hcmd2LmxhenljbGljayA9PT0gdHJ1ZSA/IDcwMCA6IG1pdG0uYXJndi5sYXp5Y2xpY2tcclxuICBmb3IgKGNvbnN0IGVsIG9mIGFycikge1xyXG4gICAgbGV0IG5vZGUgPSBlLnRhcmdldFxyXG4gICAgd2hpbGUgKGVsICE9PSBub2RlICYmIG5vZGUgIT09IGRvY3VtZW50LmJvZHkpIHtcclxuICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZVxyXG4gICAgfVxyXG4gICAgaWYgKG5vZGUgIT09IGRvY3VtZW50LmJvZHkpIHtcclxuICAgICAgY29uc3QgX3BhZ2UgPSB3aW5kb3dbJ3hwbGF5LXBhZ2UnXVxyXG4gICAgICBjb25zdCBwYXJhbXMgPSB7IG5hbWVzcGFjZSwgX3BhZ2UsIGhvc3QsIGJyb3dzZXIgfVxyXG4gICAgICBwYXJhbXMuZm5hbWUgPSBmbmFtZT09PSd+JyA/ICd+XycgOiBmbmFtZVxyXG4gICAgICB3aW5kb3cud3NfX3NlbmQoJ3NjcmVlbnNob3QnLCBwYXJhbXMpXHJcbiAgICAgIGlmIChtaXRtLmFyZ3YubGF6eWNsaWNrKSB7XHJcbiAgICAgICAgLy8gZGVsYXkgYWN0aW9uIHRvIGZpbmlzaCBzY3JlZW5zaG90XHJcbiAgICAgICAgd2luZG93Lm1pdG0uc2NyZWVuc2hvdCA9IGUudGFyZ2V0XHJcbiAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKVxyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIGFjdCA9IHdpbmRvdy5taXRtLnNjcmVlbnNob3RcclxuICAgICAgICAgIGlmIChhY3QpIHtcclxuICAgICAgICAgICAgYWN0LmNsaWNrKClcclxuICAgICAgICAgICAgYWN0ID0gdW5kZWZpbmVkICBcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWxheSBhY3Rpb24gdW5kZWZpbmVkJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZGVsYXkpXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICgpID0+IHtcclxuICBjb25zdCByb3V0ZSA9IHdpbmRvdy5taXRtLnJvdXRlc1tfd3NfbmFtZXNwYWNlKCldXHJcbiAgaWYgKHJvdXRlICYmIHJvdXRlLnNjcmVlbnNob3QpIHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzY3JlZW5zaG90KVxyXG4gICAgfSlcclxuICB9XHJcbn1cclxuIiwgIi8qIGdsb2JhbCBsb2NhdGlvbiwgaGlzdG9yeSwgY2hyb21lLCBFdmVudCwgQ3NzU2VsZWN0b3JHZW5lcmF0b3IgKi9cclxuLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXHJcbmNvbnN0IF93c19uYW1lc3BhY2UgPSByZXF1aXJlKCcuL193c19uYW1lc3BhY2UnKVxyXG5jb25zdCBfd3NfdmVuZG9yID0gcmVxdWlyZSgnLi9fd3NfdmVuZG9yJylcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gKCkgPT4ge1xyXG4gIGNvbnN0IGNvbnRhaW5lclN0eWxlMSA9ICdwb3NpdGlvbjogZml4ZWQ7ei1pbmRleDogOTk5OTk7cmlnaHQ6IDNweDsnXHJcbiAgY29uc3QgY29udGFpbmVyU3R5bGUyID0gJ3Bvc2l0aW9uOiBmaXhlZDt6LWluZGV4OiA5OTk5OTtsZWZ0OiAgM3B4OydcclxuICBjb25zdCBjb250YWluZXJTdHlsZTMgPSAncG9zaXRpb246IGZpeGVkO3otaW5kZXg6IDk5OTk5O3JpZ2h0OiAzcHg7IHRvcDogMjBweDsgdGV4dC1hbGlnbjogZW5kOydcclxuICBjb25zdCBidXR0b25TdHlsZSA9ICcnXHJcbiAgY29uc3Qgc3R5bGUgPSBgXHJcbiAgLm1pdG0tYnRuIHtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGZvbnQtc2l6ZTogOHB4O1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xyXG4gICAgZm9udC1mYW1pbHk6IG1vbmFjbywgQ29uc29sYXMsIFwiTHVjaWRhIENvbnNvbGVcIiwgbW9ub3NwYWNlO1xyXG4gIH1cclxuICAubWl0bS1idG46aG92ZXJ7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO1xyXG4gIH1cclxuICAuYmdyb3VwLXJpZ2h0IC5taXRtLWJyLFxyXG4gIC5iZ3JvdXAtbGVmdCAubWl0bS1icntcclxuICAgIGRpc3BsYXk6dGFibGU7XHJcbiAgfWBcclxuICBjb25zdCBldmVudCA9IG5ldyBFdmVudCgndXJsY2hhbmdlZCcpXHJcbiAgbGV0IGNvbnRhaW5lciA9IHtcclxuICAgIHJpZ2h0Mzoge30sXHJcbiAgICByaWdodDoge30sXHJcbiAgICBsZWZ0OiB7fSxcclxuICB9XHJcbiAgbGV0IGN0cmwgPSBmYWxzZVxyXG4gIGxldCBidXR0b24gPSB7fVxyXG4gIGxldCBiZ3JvdXAgPSB7XHJcbiAgICByaWdodDM6IHt9LFxyXG4gICAgcmlnaHQ6IHt9LFxyXG4gICAgbGVmdDoge30sXHJcbiAgfVxyXG4gIGxldCBpbnRlcnZJZFxyXG4gIGxldCBvYnNlcnZlcmZuXHJcblxyXG4gIGZ1bmN0aW9uIHRvUmVnZXggKHBhdGhNc2cpIHtcclxuICAgIGxldCBbcGF0aCwgbXNnXSA9IHBhdGhNc2cuc3BsaXQoJz0+JykubWFwKGl0ZW0gPT4gaXRlbS50cmltKCkpXHJcbiAgICBwYXRoID0gcGF0aC5yZXBsYWNlKC9cXC4vZywgJ1xcXFwuJykucmVwbGFjZSgvXFw/L2csICdcXFxcPycpXHJcbiAgICByZXR1cm4geyBwYXRoLCBtc2cgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlQnV0dG9uKGJ1dHRvbnMsIHBvcykge1xyXG4gICAgbGV0IGJyXHJcbiAgICBmb3IgKGNvbnN0IGlkIGluIGJ1dHRvbnMpIHtcclxuICAgICAgY29uc3QgW2NhcHRpb24sIGNvbG9yLCBrbGFzXSA9IGlkLnNwbGl0KCd8JylcclxuICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuICAgICAgY29uc3QgZm4gID0gYnV0dG9uc1tpZF1cclxuICAgICAgYnRuLm9uY2xpY2sgPSBhc3luYyBlID0+IHtcclxuICAgICAgICBsZXQgYXJyID0gZm4oZSlcclxuICAgICAgICBpZiAoYXJyIGluc3RhbmNlb2YgUHJvbWlzZSkge1xyXG4gICAgICAgICAgYXJyID0gYXdhaXQgYXJyXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpIHtcclxuICAgICAgICAgIGF3YWl0IHBsYXkoYXJyKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBidG4uaW5uZXJUZXh0ID0gY2FwdGlvblxyXG4gICAgICBidG4uY2xhc3NMaXN0LmFkZCgnbWl0bS1idG4nKVxyXG4gICAgICBidG4uY2xhc3NMaXN0LmFkZChgJHtwb3N9YClcclxuICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoa2xhcyB8fCBjYXB0aW9uKVxyXG4gICAgICBidG4uc3R5bGUgPSBidXR0b25TdHlsZSArIChjb2xvciA/IGBiYWNrZ3JvdW5kOiAke2NvbG9yfTtgIDogJycpXHJcbiAgICAgIGlmIChwb3M9PT0ncmlnaHQnKSB7XHJcbiAgICAgICAgYnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcclxuICAgICAgICBici5pbm5lckhUTUwgPSAnJm5ic3A7J1xyXG4gICAgICAgIGJncm91cFtwb3NdLmFwcGVuZENoaWxkKGJyKVxyXG4gICAgICAgIGJncm91cFtwb3NdLmFwcGVuZENoaWxkKGJ0bilcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBiciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxyXG4gICAgICAgIGJyLmNsYXNzTmFtZSA9ICdtaXRtLWJyJ1xyXG4gICAgICAgIGJncm91cFtwb3NdLmFwcGVuZENoaWxkKGJ0bilcclxuICAgICAgICBiZ3JvdXBbcG9zXS5hcHBlbmRDaGlsZChicilcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0QnV0dG9ucyAoYnV0dG9ucywgcG9zaXRpb24pIHtcclxuICAgIGlmIChiZ3JvdXBbcG9zaXRpb25dKSB7XHJcbiAgICAgIGJncm91cFtwb3NpdGlvbl0uaW5uZXJIVE1MID0gJydcclxuICAgICAgY3JlYXRlQnV0dG9uKGJ1dHRvbnMsIHBvc2l0aW9uKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbGV0IGRlYnVua1xyXG4gIGZ1bmN0aW9uIHVybENoYW5nZSAoZXZlbnQpIHtcclxuICAgIGNvbnN0IG5hbWVzcGFjZSA9IF93c19uYW1lc3BhY2UoKVxyXG4gICAgaWYgKHdpbmRvdy5taXRtLmF1dG9maWxsKSB7XHJcbiAgICAgIGRlbGV0ZSB3aW5kb3cubWl0bS5hdXRvZmlsbFxyXG4gICAgfVxyXG4gICAgaWYgKHdpbmRvdy5taXRtLmF1dG9pbnRlcnZhbCkge1xyXG4gICAgICBjbGVhckludGVydmFsKGludGVydklkKVxyXG4gICAgICBkZWxldGUgd2luZG93Lm1pdG0uYXV0b2ludGVydmFsXHJcbiAgICB9XHJcbiAgICBpZiAod2luZG93Lm1pdG0uYXV0b2J1dHRvbnMpIHtcclxuICAgICAgZGVsZXRlIHdpbmRvdy5taXRtLmF1dG9idXR0b25zXHJcbiAgICB9XHJcbiAgICBpZiAod2luZG93Lm1pdG0ucmlnaHRidXR0b25zKSB7XHJcbiAgICAgIGRlbGV0ZSB3aW5kb3cubWl0bS5yaWdodGJ1dHRvbnNcclxuICAgIH1cclxuICAgIGlmICh3aW5kb3cubWl0bS5sZWZ0YnV0dG9ucykge1xyXG4gICAgICBkZWxldGUgd2luZG93Lm1pdG0ubGVmdGJ1dHRvbnNcclxuICAgIH1cclxuICAgIGlmICh3aW5kb3cubWl0bS5tYWNyb2tleXMpIHtcclxuICAgICAgZGVsZXRlIHdpbmRvdy5taXRtLm1hY3Jva2V5c1xyXG4gICAgfVxyXG4gICAgaWYgKG5hbWVzcGFjZSkge1xyXG4gICAgICBjb25zdCB7aHJlZiwgb3JpZ2lufSA9IGxvY2F0aW9uXHJcbiAgICAgIGNvbnN0IF9ocmVmID0gaHJlZi5yZXBsYWNlKG9yaWdpbiwgJycpXHJcbiAgICAgIGNvbnN0IHtfbWFjcm9zXywgbWFjcm9zfSA9IHdpbmRvdy5taXRtXHJcbiAgICAgIG9ic2VydmVyZm4gPSB1bmRlZmluZWRcclxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gbWFjcm9zKSB7XHJcbiAgICAgICAgY29uc3QgeyBwYXRoLCBtc2cgfSA9IHRvUmVnZXgoa2V5KVxyXG4gICAgICAgIGlmIChfaHJlZi5tYXRjaChwYXRoKSkge1xyXG4gICAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IG1zZyB8fCAnRW50cnknXHJcbiAgICAgICAgICBfbWFjcm9zXyAmJiBfbWFjcm9zXygpXHJcbiAgICAgICAgICBvYnNlcnZlcmZuID0gbWFjcm9zW2tleV0oKVxyXG4gICAgICAgICAgZGVidW5rICYmIGNsZWFyVGltZW91dChkZWJ1bmspXHJcbiAgICAgICAgICBkZWJ1bmsgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgZGVidW5rID0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIGNvbnN0IHthdXRvYnV0dG9ucywgcmlnaHRidXR0b25zLCBsZWZ0YnV0dG9uc30gPSB3aW5kb3cubWl0bVxyXG4gICAgICAgICAgICByaWdodGJ1dHRvbnMgJiYgc2V0QnV0dG9ucyhyaWdodGJ1dHRvbnMsICdyaWdodDMnKVxyXG4gICAgICAgICAgICBsZWZ0YnV0dG9ucyAmJiBzZXRCdXR0b25zKGxlZnRidXR0b25zLCAnbGVmdCcpXHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cubWl0bS5hdXRvZmlsbCkge1xyXG4gICAgICAgICAgICAgIGF1dG9idXR0b25zICYmIHNldEJ1dHRvbnMoe1xyXG4gICAgICAgICAgICAgICAgLi4uYXV0b2J1dHRvbnMsXHJcbiAgICAgICAgICAgICAgICAnRW50cnknKCkge1xyXG4gICAgICAgICAgICAgICAgICBsZXQge2F1dG9maWxsfSA9IHdpbmRvdy5taXRtXHJcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXV0b2ZpbGwgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBhdXRvZmlsbCA9IGF1dG9maWxsKClcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBwbGF5KGF1dG9maWxsKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0sICdyaWdodCcpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgYXV0b2J1dHRvbnMgJiYgc2V0QnV0dG9ucyhhdXRvYnV0dG9ucywgJ3JpZ2h0JylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSwgMClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnRhaW5lci5yaWdodDMuc3R5bGUgPSBjb250YWluZXJTdHlsZTNcclxuICAgIGNvbnRhaW5lci5yaWdodC5zdHlsZSA9IGNvbnRhaW5lclN0eWxlMVxyXG4gICAgY29udGFpbmVyLmxlZnQuc3R5bGUgID0gY29udGFpbmVyU3R5bGUyXHJcbiAgICBjb25zdCB2aXNpYmxlID0gKHdpbmRvdy5taXRtLmF1dG9maWxsKVxyXG4gICAgYnV0dG9uLnN0eWxlID0gYnV0dG9uU3R5bGUgKyAodmlzaWJsZSA/ICdiYWNrZ3JvdW5kLWNvbG9yOiBhenVyZTsnIDogJ2Rpc3BsYXk6IG5vbmU7JylcclxuICAgIGlmICh0eXBlb2YgKHdpbmRvdy5taXRtLmF1dG9pbnRlcnZhbCkgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgaW50ZXJ2SWQgPSBzZXRJbnRlcnZhbCh3aW5kb3cubWl0bS5hdXRvaW50ZXJ2YWwsIDUwMClcclxuICAgIH1cclxuICAgIGN0cmwgPSBmYWxzZVxyXG4gIH1cclxuXHJcbiAgY29uc3QgdmVuZG9yID0gX3dzX3ZlbmRvcigpXHJcbiAgaWYgKFsnZmlyZWZveCcsICd3ZWJraXQnXS5pbmNsdWRlcyh2ZW5kb3IpIHx8IChjaHJvbWUgJiYgIWNocm9tZS50YWJzKSkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBrZXliQ3RybClcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1cmxjaGFuZ2VkJywgdXJsQ2hhbmdlKVxyXG4gICAgaWYoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gJ2xvYWRpbmcnKSB7XHJcbiAgICAgIGluaXQoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgaW5pdClcclxuICAgIH0gICAgXHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVyblxyXG4gIH1cclxuXHJcbiAgY29uc3QgZm4gPSBoaXN0b3J5LnB1c2hTdGF0ZVxyXG4gIGhpc3RvcnkucHVzaFN0YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgZm4uYXBwbHkoaGlzdG9yeSwgYXJndW1lbnRzKVxyXG4gICAgY29tcGFyZUhyZWYoKVxyXG4gIH1cclxuXHJcbiAgX3BsYXkgPSBqc29uID0+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICB3aW5kb3cud3NfX3NlbmQoJ2F1dG9maWxsJywganNvbiwgcmVzb2x2ZSlcclxuICAgICAgICAvLyBwbGF5KGpzb24sIHJlc29sdmUpXHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmVqZWN0KGVycm9yKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgX3Bvc3QgPSBqc29uID0+IHtcclxuICAgIGNvbnN0IGNvbmZpZyA9IHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShqc29uKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGZldGNoKCcvbWl0bS1wbGF5L3BsYXkuanNvbicsIGNvbmZpZylcclxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgcmVzb2x2ZShyZXNwb25zZS5qc29uKCkpXHJcbiAgXHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICByZXNvbHZlKGRhdGEpXHJcbiAgICAgICAgfSk7ICAgICAgICAgIFxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJlamVjdChlcnJvcilcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIHBsYXkgKGF1dG9maWxsKSB7XHJcbiAgICBjb25zdCB7X19hcmdzfSA9IHdpbmRvdy5taXRtXHJcbiAgICBpZiAoYXV0b2ZpbGwpIHtcclxuICAgICAgaWYgKHR5cGVvZiAoYXV0b2ZpbGwpID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgYXV0b2ZpbGwgPSBhdXRvZmlsbCgpXHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgYnJvd3NlciA9IF93c192ZW5kb3IoKVxyXG4gICAgICBjb25zdCBsZW50aCA9IGF1dG9maWxsLmxlbmd0aFxyXG4gICAgICBjb25zdCBfcGFnZSA9IHdpbmRvd1sneHBsYXktcGFnZSddXHJcbiAgICAgIGNvbnN0IF9mcmFtZSA9IHdpbmRvd1sneHBsYXktZnJhbWUnXVxyXG4gICAgICBjb25zdCBfanNvbiA9IHthdXRvZmlsbCwgYnJvd3NlciwgX3BhZ2UsIF9mcmFtZX1cclxuICAgICAgY29uc29sZS5sb2cobGVudGggPT09IDEgPyBgICAke2F1dG9maWxsfWAgOiBKU09OLnN0cmluZ2lmeShhdXRvZmlsbCwgbnVsbCwgMikpXHJcbiAgICAgIGxldCByZXN1bHRcclxuICAgICAgaWYgKFt0cnVlLCAnb2ZmJ10uaW5jbHVkZXMoX19hcmdzLm5vc29ja2V0KSkge1xyXG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IF9wb3N0KF9qc29uKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IF9wbGF5KF9qc29uKVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXN1bHRcclxuICAgIH1cclxuICB9XHJcbiAgd2luZG93Lm1pdG0uZm4ucGxheSA9IHBsYXlcclxuICBcclxuICBmdW5jdGlvbiBrZXliQ3RybCAoZSkge1xyXG4gICAgY29uc3QgeyBtYWNyb2tleXMgfSA9IHdpbmRvdy5taXRtXHJcbiAgICBpZiAoZS5jdHJsS2V5ICYmIGUua2V5ID09PSAnU2hpZnQnKSB7XHJcbiAgICAgIGN0cmwgPSAhY3RybFxyXG4gICAgICBjb250YWluZXIucmlnaHQzLnN0eWxlID0gY29udGFpbmVyU3R5bGUzICsgKCFjdHJsID8gJycgOiAnZGlzcGxheTogbm9uZTsnKVxyXG4gICAgICBjb250YWluZXIucmlnaHQuc3R5bGUgID0gY29udGFpbmVyU3R5bGUxICsgKCFjdHJsID8gJycgOiAnZGlzcGxheTogbm9uZTsnKVxyXG4gICAgICBjb250YWluZXIubGVmdC5zdHlsZSAgID0gY29udGFpbmVyU3R5bGUyICsgKCFjdHJsID8gJycgOiAnZGlzcGxheTogbm9uZTsnKVxyXG4gICAgfSBlbHNlIGlmIChlLmN0cmxLZXkgJiYgZS5hbHRLZXkpIHtcclxuICAgICAgY29uc29sZS5sb2coeyBtYWNybzogYGN0cmwgKyBhbHQgKyAke2UuY29kZX1gIH0pXHJcbiAgICAgIGlmIChtYWNyb2tleXMpIHtcclxuICAgICAgICBsZXQgbWFjcm8gPSBtYWNyb2tleXNbZS5jb2RlXVxyXG4gICAgICAgIGlmIChtYWNybykge1xyXG4gICAgICAgICAgbWFjcm8gPSBtYWNybygpXHJcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtYWNybykpIHtcclxuICAgICAgICAgICAgbGV0IG1hY3JvSW5kZXggPSAwXHJcbiAgICAgICAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGxldCBzZWxlY3RvciA9IG1hY3JvW21hY3JvSW5kZXhdXHJcbiAgICAgICAgICAgICAgaWYgKHNlbGVjdG9yLm1hdGNoKC9eICpbPS1dPi8pKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVFbGVtZW50ID0gQ3NzU2VsZWN0b3JHZW5lcmF0b3IuZ2V0Q3NzU2VsZWN0b3IoZG9jdW1lbnQuYWN0aXZlRWxlbWVudClcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gYCR7YWN0aXZlRWxlbWVudH0gJHtzZWxlY3Rvcn1gXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHBsYXkoW3NlbGVjdG9yXSlcclxuXHJcbiAgICAgICAgICAgICAgbWFjcm9JbmRleCArPSAxXHJcbiAgICAgICAgICAgICAgaWYgKG1hY3JvSW5kZXggPj0gbWFjcm8ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMTAwKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3Qge2xvY2F0aW9ufSA9IGRvY3VtZW50XHJcbiAgbGV0IG9sZEhyZWYgPSBsb2NhdGlvbi5ocmVmXHJcbiAgbGV0IG9EZWJ1bmsgPSB1bmRlZmluZWRcclxuICBmdW5jdGlvbiBjb21wYXJlSHJlZihub2Rlcykge1xyXG4gICAgLy8gY29uc29sZS5sb2coJ0RPTSBtdXRhdGVkIScpXHJcbiAgICBpZiAob2xkSHJlZiAhPSBsb2NhdGlvbi5ocmVmKSB7XHJcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KVxyXG4gICAgICBvbGRIcmVmID0gbG9jYXRpb24uaHJlZlxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHR5cGVvZiBvYnNlcnZlcmZuID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgb0RlYnVuayAmJiBjbGVhclRpbWVvdXQob0RlYnVuaylcclxuICAgICAgICBvRGVidW5rID0gc2V0VGltZW91dCgoKT0+IHtcclxuICAgICAgICAgIG9EZWJ1bmsgPSB1bmRlZmluZWRcclxuICAgICAgICAgIG9ic2VydmVyZm4obm9kZXMpXHJcbiAgICAgICAgICBjb25zdCB7YXV0b2J1dHRvbnMsIHJpZ2h0YnV0dG9ucywgbGVmdGJ1dHRvbnN9ID0gd2luZG93Lm1pdG1cclxuICAgICAgICAgIHJpZ2h0YnV0dG9ucyAmJiBzZXRCdXR0b25zKHJpZ2h0YnV0dG9ucywgJ3JpZ2h0MycpXHJcbiAgICAgICAgICBsZWZ0YnV0dG9ucyAmJiBzZXRCdXR0b25zKGxlZnRidXR0b25zLCAnbGVmdCcpXHJcbiAgICAgICAgICBjb25zdCB7IGF1dG9maWxsIH0gPSB3aW5kb3cubWl0bVxyXG4gICAgICAgICAgaWYgKGF1dG9maWxsKSB7XHJcbiAgICAgICAgICAgIGF1dG9idXR0b25zICYmIHNldEJ1dHRvbnMoe1xyXG4gICAgICAgICAgICAgIC4uLmF1dG9idXR0b25zLFxyXG4gICAgICAgICAgICAgICdFbnRyeScoKSB7cGxheShhdXRvZmlsbCl9XHJcbiAgICAgICAgICAgIH0sICdyaWdodCcpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhdXRvYnV0dG9ucyAmJiBzZXRCdXR0b25zKGF1dG9idXR0b25zLCAncmlnaHQnKVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9LCAxMDApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICBjb25zdCBodG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpXHJcbiAgICBjb25zdCBodG1scmVmID0gaHRtbC5maXJzdEVsZW1lbnRDaGlsZFxyXG4gICAgY29uc3Qgc3R5bGVCdXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKVxyXG4gICAgY29uc3QgZGl2VG9wUmlnaHQzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgIGNvbnN0IGRpdlRvcFJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgIGNvbnN0IGRpdlRvcExlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG5cclxuICAgIHN0eWxlQnV0dG9ucy5pbm5lckhUTUwgPSBzdHlsZVxyXG4gICAgZGl2VG9wUmlnaHQzLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cImJncm91cC1yaWdodFwiPjwvc3Bhbj5gXHJcbiAgICBkaXZUb3BSaWdodC5pbm5lckhUTUwgID0gYDxzcGFuIGNsYXNzPVwiYmdyb3VwLXJpZ2h0XCI+PC9zcGFuPmBcclxuICAgIGRpdlRvcExlZnQuaW5uZXJIVE1MICAgPSBgPHNwYW4gY2xhc3M9XCJiZ3JvdXAtbGVmdFwiPjwvc3Bhbj5gXHJcbiAgICBkaXZUb3BSaWdodC5jbGFzc05hbWUgID0gJ21pdG0gYXV0b2ZpbGwtY29udGFpbmVyJ1xyXG4gICAgZGl2VG9wTGVmdC5jbGFzc05hbWUgICA9ICdtaXRtIGF1dG9maWxsLWNvbnRhaW5lcidcclxuICAgIGRpdlRvcFJpZ2h0My5zdHlsZSA9IGNvbnRhaW5lclN0eWxlM1xyXG4gICAgZGl2VG9wUmlnaHQuc3R5bGUgID0gY29udGFpbmVyU3R5bGUxXHJcbiAgICBkaXZUb3BMZWZ0LnN0eWxlICAgPSBjb250YWluZXJTdHlsZTJcclxuXHJcbiAgICBodG1sLmluc2VydEJlZm9yZShzdHlsZUJ1dHRvbnMsIGh0bWxyZWYpXHJcbiAgICBodG1sLmluc2VydEJlZm9yZShkaXZUb3BSaWdodDMsIGh0bWxyZWYpXHJcbiAgICBodG1sLmluc2VydEJlZm9yZShkaXZUb3BSaWdodCwgaHRtbHJlZilcclxuICAgIGh0bWwuaW5zZXJ0QmVmb3JlKGRpdlRvcExlZnQsIGh0bWxyZWYpXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgY29udGFpbmVyLnJpZ2h0MyA9IGRpdlRvcFJpZ2h0M1xyXG4gICAgICBjb250YWluZXIucmlnaHQgID0gZGl2VG9wUmlnaHRcclxuICAgICAgY29udGFpbmVyLmxlZnQgICA9IGRpdlRvcExlZnRcclxuICAgICAgYnV0dG9uLnN0eWxlICA9IGAke2J1dHRvblN0eWxlfWJhY2tncm91bmQtY29sb3I6IGF6dXJlO2BcclxuICAgICAgYmdyb3VwLnJpZ2h0MyA9IGRpdlRvcFJpZ2h0My5jaGlsZHJlblswXVxyXG4gICAgICBiZ3JvdXAucmlnaHQgPSBkaXZUb3BSaWdodC5jaGlsZHJlblswXVxyXG4gICAgICBiZ3JvdXAubGVmdCAgPSBkaXZUb3BMZWZ0LmNoaWxkcmVuWzBdXHJcbiAgICAgIHVybENoYW5nZShldmVudClcclxuICAgICAgb2JzZXJ2ZWQoKVxyXG4gICAgfSwgMClcclxuICB9XHJcblxyXG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoY29tcGFyZUhyZWYpO1xyXG4gIHdpbmRvdy5vYnNlcnZlciA9IG9ic2VydmVyXHJcbiAgZnVuY3Rpb24gb2JzZXJ2ZWQoKSB7XHJcbiAgICBvYnNlcnZlci5kaXNjb25uZWN0KClcclxuICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwge3N1YnRyZWU6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZX0pXHJcbiAgfVxyXG5cclxufVxyXG4iLCAiZnVuY3Rpb24gZGVib3VuY2UgKGZuLCBkZWxheSA9IDUwMCkge1xyXG4gIGxldCBfdGltZW91dFxyXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBfdGhpcyA9IHRoaXNcclxuICAgIGNvbnN0IGFyZ3MgPSBhcmd1bWVudHNcclxuICAgIF90aW1lb3V0ICYmIGNsZWFyVGltZW91dChfdGltZW91dClcclxuICAgIF90aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGZuLmFwcGx5KF90aGlzLCBhcmdzKVxyXG4gICAgfSwgZGVsYXkpXHJcbiAgfVxyXG59XHJcbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2VcclxuIiwgIi8qIGdsb2JhbCBsb2NhdGlvbiAqL1xyXG5jb25zdCBfd3NfbmFtZXNwYWNlID0gcmVxdWlyZSgnLi9fd3NfbmFtZXNwYWNlJylcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gKCkgPT4ge1xyXG4gIGNvbnN0IG5hbWVzcGFjZSA9IF93c19uYW1lc3BhY2UoKVxyXG4gIGxldCByb3V0ZSA9IHdpbmRvdy5taXRtLnJvdXRlc1tuYW1lc3BhY2VdXHJcbiAgY29uc3Qge19zdWJuczogc30gPSByb3V0ZS5fY2hpbGRuc1xyXG4gIGlmIChzICYmIG1pdG0ucm91dGVzW3NdKSB7XHJcbiAgICByb3V0ZT0gbWl0bS5yb3V0ZXNbc11cclxuICB9XHJcbiAgcmV0dXJuIHJvdXRlXHJcbn1cclxuIiwgIi8qIGdsb2JhbCBsb2NhdGlvbiwgTXV0YXRpb25PYnNlcnZlciAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cclxuY29uc3QgX3dzX25hbWVzcGFjZSA9IHJlcXVpcmUoJy4vX3dzX25hbWVzcGFjZScpXHJcbmNvbnN0IF93c19kZWJvdW5jZSA9IHJlcXVpcmUoJy4vX3dzX2RlYm91bmNlJylcclxuY29uc3QgX3dzX3ZlbmRvciA9IHJlcXVpcmUoJy4vX3dzX3ZlbmRvcicpXHJcbmNvbnN0IF93c19yb3V0ZSA9IHJlcXVpcmUoJy4vX3dzX3JvdXRlJylcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gKCkgPT4ge1xyXG4gIGlmIChsb2NhdGlvbi5vcmlnaW4ubWF0Y2goJ2Nocm9tZS1leHRlbnNpb24nKSkge1xyXG4gICAgcmV0dXJuXHJcbiAgfVxyXG4gIGNvbnN0IHsgaG9zdG5hbWU6IGhvc3QgfSA9IGxvY2F0aW9uXHJcbiAgY29uc3Qgc3Nob3QgPSB7fVxyXG4gIGNvbnN0IG5vZGVzID0ge31cclxuXHJcbiAgbGV0IHJvdXRlID0gX3dzX3JvdXRlKClcclxuICBpZiAocm91dGUgJiYgcm91dGUuc2NyZWVuc2hvdCkge1xyXG4gICAgY29uc3QgeyBvYnNlcnZlcjogb2IgfSA9IHJvdXRlLnNjcmVlbnNob3RcclxuICAgIGZvciAoY29uc3QgaWQgaW4gb2IpIHtcclxuICAgICAgbGV0IGVsID0ge31cclxuICAgICAgaWYgKG9iW2lkXSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIGVsID0ge1xyXG4gICAgICAgICAgdGl0bGU6ICdub3RpdGxlJyxcclxuICAgICAgICAgIGluc2VydDogdHJ1ZSxcclxuICAgICAgICAgIHJlbW92ZTogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgfSBpZiAodHlwZW9mIG9iW2lkXSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICBlbCA9IHtcclxuICAgICAgICAgIHRpdGxlOiAnbm9jYXB0dXJlJyxcclxuICAgICAgICAgIGluc2VydDogZmFsc2UsXHJcbiAgICAgICAgICByZW1vdmU6IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGFyciA9IG9iW2lkXS5zcGxpdCgnOicpXHJcbiAgICAgICAgYXJyWzFdLnNwbGl0KCcsJykubWFwKGUgPT4ge1xyXG4gICAgICAgICAgZWxbZV0gPSB0cnVlXHJcbiAgICAgICAgfSlcclxuICAgICAgICBlbC50aXRsZSA9IGFyclswXVxyXG4gICAgICB9XHJcbiAgICAgIHNzaG90W2lkXSA9IGVsXHJcbiAgICAgIG5vZGVzW2lkXSA9IHtcclxuICAgICAgICBpbnNlcnQ6IGZhbHNlLFxyXG4gICAgICAgIHJlbW92ZTogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBsZXQgb2JcclxuICBsZXQgZm5hbWVcclxuICBjb25zdCBuYW1lc3BhY2UgPSBfd3NfbmFtZXNwYWNlKClcclxuICBjb25zdCBicm93c2VyID0gX3dzX3ZlbmRvcigpXHJcbiAgY29uc3QgY2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAocm91dGUgJiYgcm91dGUuc2NyZWVuc2hvdCkge1xyXG4gICAgICBvYiA9IHJvdXRlLnNjcmVlbnNob3Qub2JzZXJ2ZXJcclxuICAgIH1cclxuICAgIGNvbnN0IF9wYWdlID0gd2luZG93Wyd4cGxheS1wYWdlJ11cclxuICAgIGZvciAoY29uc3QgaWQgaW4gbm9kZXMpIHtcclxuICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoaWQpXHJcbiAgICAgIGlmIChlbC5sZW5ndGgpIHtcclxuICAgICAgICBpZiAoIW5vZGVzW2lkXS5pbnNlcnQpIHtcclxuICAgICAgICAgIG5vZGVzW2lkXS5pbnNlcnQgPSB0cnVlXHJcbiAgICAgICAgICBpZiAobm9kZXNbaWRdLnJlbW92ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG5vZGVzW2lkXS5yZW1vdmUgPSBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKG9iICYmIHR5cGVvZiBvYltpZF09PT0nZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vZCA9IGVsWzBdIHx8IGVsXHJcbiAgICAgICAgICAgIGlmIChub2QuX3dzX2NvdW50PT09dW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgbm9kLl93c19jb3VudCA9IDBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBub2QuX3dzX2NvdW50ICs9IDFcclxuICAgICAgICAgICAgaWYgKG5vZC5fd3NfY291bnQ8Mikge1xyXG4gICAgICAgICAgICAgIG9iW2lkXShub2QpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gXHJcbiAgICAgICAgICBpZiAoc3Nob3RbaWRdLmluc2VydCkge1xyXG4gICAgICAgICAgICBmbmFtZSA9IGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCAnJykucmVwbGFjZSgvXFwvL2csICctJylcclxuICAgICAgICAgICAgZm5hbWUgPSBgJHtmbmFtZX0tJHtzc2hvdFtpZF0udGl0bGV9LWluc2VydGBcclxuICAgICAgICAgICAgd2luZG93LndzX19zZW5kKCdzY3JlZW5zaG90JywgeyBuYW1lc3BhY2UsIF9wYWdlLCBob3N0LCBmbmFtZSwgYnJvd3NlciB9KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoIW5vZGVzW2lkXS5yZW1vdmUpIHtcclxuICAgICAgICAgIG5vZGVzW2lkXS5yZW1vdmUgPSB0cnVlXHJcbiAgICAgICAgICBub2Rlc1tpZF0uaW5zZXJ0ID0gZmFsc2VcclxuICAgICAgICAgIGlmIChzc2hvdFtpZF0ucmVtb3ZlKSB7XHJcbiAgICAgICAgICAgIGZuYW1lID0gbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXlxcLy8sICcnKS5yZXBsYWNlKC9cXC8vZywgJy0nKVxyXG4gICAgICAgICAgICBmbmFtZSA9IGAke2ZuYW1lfS0ke3NzaG90W2lkXS50aXRsZX0tcmVtb3ZlYFxyXG4gICAgICAgICAgICB3aW5kb3cud3NfX3NlbmQoJ3NjcmVlbnNob3QnLCB7IG5hbWVzcGFjZSwgX3BhZ2UsIGhvc3QsIGZuYW1lLCBicm93c2VyIH0pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xyXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihfd3NfZGVib3VuY2UoY2FsbGJhY2ssIDEwMCkpXHJcbiAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcclxuICAgICAgYXR0cmlidXRlczogdHJ1ZSxcclxuICAgICAgY2hpbGRMaXN0OiB0cnVlLFxyXG4gICAgICBzdWJ0cmVlOiB0cnVlXHJcbiAgICB9KVxyXG4gIH0pICBcclxufVxyXG4iLCAiY29uc3QgdDY0ID0gJ1dhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmgnXHJcblxyXG5jb25zdCBuYW5vaWQgPSAoc2l6ZSA9IDgpID0+IHtcclxuICBsZXQgaWQgPSAnJ1xyXG4gIHdoaWxlIChzaXplLS0gPiAwKSB7XHJcbiAgICBpZCArPSB0NjRbTWF0aC5yYW5kb20oKSAqIDY0IHwgMF1cclxuICB9XHJcbiAgcmV0dXJuIGlkXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gKCkgPT4ge1xyXG4gIGNvbnN0IHsgX3dzIH0gPSB3aW5kb3dcclxuXHJcbiAgLy8gZXg6IHdzX2Jyb2FkY2FzdCgnX3N0eWxle1wiZGF0YVwiOntcInFcIjpcIipcIixcImNzc1wiOlwiY29sb3I6Ymx1ZTtcIn19JylcclxuICAvLyBleDogd3NfYnJvYWRjYXN0KCdfcGluZ3tcImRhdGFcIjpcIkhpIVwifScpXHJcbiAgd2luZG93LndzX2Jyb2FkY2FzdCA9IChqc29uLCBfYWxsID0gdHJ1ZSkgPT4ge1xyXG4gICAgY29uc3QgbXNnID0geyBkYXRhOiBqc29uLCBfYWxsIH1cclxuICAgIF93cy5zZW5kKGBicm9hZGNhc3Qke0pTT04uc3RyaW5naWZ5KG1zZyl9YClcclxuICB9XHJcblxyXG4gIC8vIGV4OiB3c19lbWl0cGFnZSgnX3N0eWxle1wiZGF0YVwiOntcInFcIjpcIipcIixcImNzc1wiOlwiY29sb3I6Ymx1ZTtcIn19JylcclxuICAvLyBleDogd3NfZW1pdHBhZ2UoJ19waW5ne1wiZGF0YVwiOlwiSGkhXCJ9JylcclxuICB3aW5kb3cud3NfZW1pdHBhZ2UgPSAoanNvbiwgcmVnZXggPSAnJykgPT4ge1xyXG4gICAgY29uc3QgbXNnID0geyBkYXRhOiBqc29uLCByZWdleCB9XHJcbiAgICBfd3Muc2VuZChgZW1pdHBhZ2Uke0pTT04uc3RyaW5naWZ5KG1zZyl9YClcclxuICB9XHJcblxyXG4gIC8vIGV4OiB3c19fc3R5bGUoe1wicVwiOlwiKlwiLFwiY3NzXCI6XCJjb2xvcjpibHVlO1wifSlcclxuICB3aW5kb3cud3NfX3N0eWxlID0gKGpzb24sIF9hbGwgPSB0cnVlKSA9PiB7XHJcbiAgICBjb25zdCBtc2cgPSB7IGRhdGE6IGpzb24sIF9hbGwgfVxyXG4gICAgX3dzLnNlbmQoYF9zdHlsZSR7SlNPTi5zdHJpbmdpZnkobXNnKX1gKVxyXG4gIH1cclxuXHJcbiAgLy8gZXg6IHdzX19waW5nKCdIaSEnKVxyXG4gIHdpbmRvdy53c19fcGluZyA9IChqc29uKSA9PiB7XHJcbiAgICBjb25zdCBtc2cgPSB7IGRhdGE6IGpzb24gfVxyXG4gICAgX3dzLnNlbmQoYF9waW5nJHtKU09OLnN0cmluZ2lmeShtc2cpfWApXHJcbiAgfVxyXG5cclxuICAvLyBleDogd3NfX2hlbHAoKVxyXG4gIHdpbmRvdy53c19faGVscCA9ICgpID0+IHtcclxuICAgIF93cy5zZW5kKCdfaGVscHt9JylcclxuICB9XHJcblxyXG4gIC8vIGV4OiB3c19fb3Blbih7dXJsOidodHRwczovL2dvb2dsZS5jb20nfSlcclxuICB3aW5kb3cud3NfX29wZW4gPSAoanNvbikgPT4ge1xyXG4gICAgY29uc3QgbXNnID0geyBkYXRhOiBqc29uIH1cclxuICAgIF93cy5zZW5kKGBfb3BlbiR7SlNPTi5zdHJpbmdpZnkobXNnKX1gKVxyXG4gIH1cclxuXHJcbiAgd2luZG93LndzX19zZW5kID0gKGNtZCwgZGF0YSwgaGFuZGxlcikgPT4ge1xyXG4gICAgY29uc3QgeyBfX2ZsYWcgfSA9IHdpbmRvdy5taXRtXHJcbiAgICBjb25zdCBpZCA9IG5hbm9pZCgpXHJcbiAgICBjb25zdCBrZXkgPSBgJHtjbWR9OiR7aWR9YFxyXG4gICAgd2luZG93Ll93c19xdWV1ZVtrZXldID0gaGFuZGxlciB8fCAodyA9PiB7fSlcclxuXHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKHdpbmRvdy5fd3NfcXVldWVba2V5XSkge1xyXG4gICAgICAgIGRlbGV0ZSB3aW5kb3cuX3dzX3F1ZXVlW2tleV1cclxuICAgICAgICBjb25zb2xlLmxvZygnPj4+IHdzIHRpbWVvdXQhJywga2V5KVxyXG4gICAgICB9XHJcbiAgICB9LCA1MDAwKVxyXG4gICAgY29uc3QgcGFyYW1zID0gYCR7a2V5fSR7SlNPTi5zdHJpbmdpZnkoeyBkYXRhIH0pfWBcclxuICAgIGlmIChfX2ZsYWdbJ3dzLW1lc3NhZ2UnXSkge1xyXG4gICAgICBjb25zb2xlLmxvZygnX3dzLnNlbmQnLCBjbWQpXHJcbiAgICB9XHJcbiAgICBfd3Muc2VuZChwYXJhbXMpXHJcbiAgfVxyXG59XHJcbi8vIHdzX19zZW5kKCdfcGluZycsICdMT0wnLCB3PT5jb25zb2xlLmxvZygnPnJlc3VsdCcsdykpO1xyXG4iLCAiLyogZ2xvYmFsIGxvY2F0aW9uICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xyXG5jb25zdCBfd3NfbmFtZXNwYWNlID0gcmVxdWlyZSgnLi9fd3NfbmFtZXNwYWNlJylcclxuXHJcbmxldCBfdGltZW91dFxyXG5sZXQgX2NzcCA9IHt9XHJcbm1vZHVsZS5leHBvcnRzID0gKCkgPT4ge1xyXG4gIGNvbnN0IGNzcEVycm9yID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGNvbnN0IHsgaG9zdG5hbWU6IGhvc3QgfSA9IGxvY2F0aW9uXHJcbiAgICBjb25zdCBuYW1lc3BhY2UgPSBfd3NfbmFtZXNwYWNlKClcclxuICAgIGNvbnN0IHBhdGggPSBsb2NhdGlvbi5wYXRobmFtZVxyXG4gICAgICAucmVwbGFjZSgvXlxcLy8sICcnKVxyXG4gICAgICAucmVwbGFjZSgvXFwvL2csICctJylcclxuICAgIGNvbnN0IHtcclxuICAgICAgYmxvY2tlZFVSSSxcclxuICAgICAgZGlzcG9zaXRpb24sXHJcbiAgICAgIGRvY3VtZW50VVJJLFxyXG4gICAgICBlZmZlY3RpdmVEaXJlY3RpdmUsXHJcbiAgICAgIG9yaWdpbmFsUG9saWN5LFxyXG4gICAgICB0aW1lU3RhbXAsXHJcbiAgICAgIHR5cGUsXHJcbiAgICAgIHZpb2xhdGVkRGlyZWN0aXZlXHJcbiAgICB9ID0gZVxyXG4gICAgY29uc3QgdHlwID0gYFske2Rpc3Bvc2l0aW9ufV0gJHtkb2N1bWVudFVSSX1gXHJcbiAgICBpZiAoIV9jc3BbdHlwXSkge1xyXG4gICAgICBfY3NwW3R5cF0gPSB7fVxyXG4gICAgfVxyXG4gICAgaWYgKCFfY3NwW3R5cF0uX2dlbmVyYWxfKSB7XHJcbiAgICAgIF9jc3BbdHlwXS5fZ2VuZXJhbF8gPSB7XHJcbiAgICAgICAgcG9saWN5OiBvcmlnaW5hbFBvbGljeSxcclxuICAgICAgICBuYW1lc3BhY2UsXHJcbiAgICAgICAgaG9zdCxcclxuICAgICAgICBwYXRoXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IF9kb2MgPSBfY3NwW3R5cF1cclxuICAgIGlmICghX2RvY1t2aW9sYXRlZERpcmVjdGl2ZV0pIHtcclxuICAgICAgX2RvY1t2aW9sYXRlZERpcmVjdGl2ZV0gPSB7fVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IF9lcnIgPSBfZG9jW3Zpb2xhdGVkRGlyZWN0aXZlXVxyXG4gICAgaWYgKCFfZXJyW2Jsb2NrZWRVUkldKSB7XHJcbiAgICAgIF9lcnJbYmxvY2tlZFVSSV0gPSB7fVxyXG4gICAgfVxyXG4gICAgY29uc3QgX21hdGNoID0gb3JpZ2luYWxQb2xpY3kubWF0Y2goYCR7dmlvbGF0ZWREaXJlY3RpdmV9IFteO10rO2ApXHJcbiAgICBjb25zdCBkaXJlY3RpdmUgPSBfbWF0Y2ggPyBfbWF0Y2hbMF0gOiBlZmZlY3RpdmVEaXJlY3RpdmVcclxuICAgIF9lcnJbYmxvY2tlZFVSSV0gPSB7XHJcbiAgICAgIGRpcmVjdGl2ZSxcclxuICAgICAgdGltZVN0YW1wLFxyXG4gICAgICB0eXBlXHJcbiAgICB9XHJcbiAgICBfdGltZW91dCAmJiBjbGVhclRpbWVvdXQoX3RpbWVvdXQpXHJcbiAgICBfdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnPj4+IENTUDonLCBfY3NwKVxyXG4gICAgICAvLyB3aW5kb3cud3NfX3NlbmQoJ2NzcF9lcnJvcicsIHtcclxuICAgICAgLy8gICBuYW1lc3BhY2UsXHJcbiAgICAgIC8vICAgaG9zdCxcclxuICAgICAgLy8gICBwYXRoLFxyXG4gICAgICAvLyAgIF9jc3AsXHJcbiAgICAgIC8vIH0pO1xyXG4gICAgICBfY3NwID0ge31cclxuICAgIH0sIDQwMDApXHJcbiAgfVxyXG5cclxuICBpZiAod2luZG93Lm1pdG0uY2xpZW50LmNzcCkge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2VjdXJpdHlwb2xpY3l2aW9sYXRpb24nLCBjc3BFcnJvcilcclxuICB9XHJcbn1cclxuLy8gZGlzcG9zaXRpb246IFwicmVwb3J0XCJcclxuLy8gZG9jdW1lbnRVUkk6IFwiaHR0cHM6Ly93aGF0L2h0bWwvY29udGFpbi9jc3BcIlxyXG4vLyB2aW9sYXRlZERpcmVjdGl2ZTogXCJpbWctc3JjXCJcclxuXHJcbi8vIGJsb2NrZWRVUkk6IFwiaHR0cHM6Ly93aGF0L3VybC9nZXR0aW5nL2Jsb2NrZWRcIlxyXG4vLyBlZmZlY3RpdmVEaXJlY3RpdmU6IFwiaW1nLXNyY1wiXHJcbi8vIG9yaWdpbmFsUG9saWN5OiBcInNjcmlwdC1zcmMgbnVsbDsgZnJhbWUtc3JjIG51bGw7IHN0eWxlLXNyYyBudWxsOyBzdHlsZS1zcmMtZWxlbSBudWxsOyBpbWctc3JjIG51bGw7XCJcclxuLy8gdGltZVN0YW1wOiAxOTMzLjgyMDAwMDAwNTY1MzFcclxuLy8gdHlwZTogXCJzZWN1cml0eXBvbGljeXZpb2xhdGlvblwiXHJcbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cclxuY29uc3QgX3dzX3Bvc3RtZXNzYWdlID0gcmVxdWlyZSgnLi9fd3NfcG9zdG1lc3NhZ2UnKVxyXG5jb25zdCBfd3NfaW5pdFNvY2tldCA9IHJlcXVpcmUoJy4vX3dzX2luaXQtc29ja2V0JylcclxuY29uc3QgX3dzX3NjcmVlbnNob3QgPSByZXF1aXJlKCcuL193c19zY3JlZW5zaG90JylcclxuY29uc3QgX3dzX2xvY2F0aW9uID0gcmVxdWlyZSgnLi9fd3NfbG9jYXRpb24nKVxyXG5jb25zdCBfd3Nfb2JzZXJ2ZXIgPSByZXF1aXJlKCcuL193c19vYnNlcnZlcicpXHJcbmNvbnN0IF93c19nZW5lcmFsID0gcmVxdWlyZSgnLi9fd3NfZ2VuZXJhbCcpXHJcbmNvbnN0IF93c19jc3BFcnIgPSByZXF1aXJlKCcuL193c19jc3AtZXJyJylcclxuXHJcbl93c19wb3N0bWVzc2FnZSgpXHJcbl93c19pbml0U29ja2V0KClcclxuX3dzX3NjcmVlbnNob3QoKVxyXG5fd3NfbG9jYXRpb24oKVxyXG5fd3Nfb2JzZXJ2ZXIoKVxyXG5fd3NfZ2VuZXJhbCgpXHJcbl93c19jc3BFcnIoKVxyXG5jb25zb2xlLmxvZygnd3MtY2xpZW50IGxvYWRlZC4uLicpIl0sCiAgIm1hcHBpbmdzIjogInEyQkFBQSwyRkFDQSxPQUFPLFFBQVUsSUFBTSxDQUNyQix3QkFBeUIsTUFBTyxDQUM5QixHQUFJLE9BQU8sS0FBSyxPQUFPLFlBQWEsQ0FDbEMsUUFBUSxJQUFJLG9CQUFvQixNQUFNLHFCQUFxQixTQUFTLE9BQVEsTUFBTSxPQUd0RixPQUFPLGlCQUFpQixVQUFXLGVBQWdC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
